<div class="section">
    <h2>Team Dependency Graph (DAG)</h2>
    <p style="color: #5a6c7d; margin-bottom: 20px;">
        This directed acyclic graph shows the flow of dependencies and deliverables between teams. 
        Starting from user needs at the top, flowing down to supporting infrastructure at the bottom.
    </p>
    
    <svg width="100%" height="800" viewBox="0 0 1200 800" style="background: #f8f9fa; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
        <!-- Define markers for arrow heads -->
        <defs>
            <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#3498db" />
            </marker>
            <marker id="arrowhead-critical" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
            </marker>
            <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#27ae60" />
            </marker>
        </defs>
        
        <!-- Layer 1: End Users (Top - Demand) -->
        <g id="user-layer">
            <rect x="200" y="50" width="180" height="60" rx="10" fill="#27ae60" opacity="0.9"/>
            <text x="290" y="75" text-anchor="middle" fill="white" font-weight="bold" font-size="13">Ministry Officials</text>
            <text x="290" y="95" text-anchor="middle" fill="white" font-size="10">(Policy Decisions)</text>
            
            <rect x="420" y="50" width="180" height="60" rx="10" fill="#27ae60" opacity="0.9"/>
            <text x="510" y="75" text-anchor="middle" fill="white" font-weight="bold" font-size="13">Health Facilities</text>
            <text x="510" y="95" text-anchor="middle" fill="white" font-size="10">(Service Delivery)</text>
            
            <rect x="640" y="50" width="180" height="60" rx="10" fill="#27ae60" opacity="0.9"/>
            <text x="730" y="75" text-anchor="middle" fill="white" font-weight="bold" font-size="13">Healthcare Workers</text>
            <text x="730" y="95" text-anchor="middle" fill="white" font-size="10">(Patient Care)</text>
        </g>
        
        <!-- Layer 2: Country Delivery Teams (Expansion) -->
        <g id="expansion-layer">
            <rect x="100" y="200" width="140" height="60" rx="10" fill="#f39c12" opacity="0.9"/>
            <text x="170" y="225" text-anchor="middle" fill="white" font-weight="bold" font-size="12">Togo</text>
            <text x="170" y="245" text-anchor="middle" fill="white" font-size="10">(Establish)</text>
            
            <rect x="270" y="200" width="140" height="60" rx="10" fill="#f39c12" opacity="0.9"/>
            <text x="340" y="225" text-anchor="middle" fill="white" font-weight="bold" font-size="12">Sierra Leone</text>
            <text x="340" y="245" text-anchor="middle" fill="white" font-size="10">(Launch)</text>
            
            <rect x="440" y="200" width="140" height="60" rx="10" fill="#f39c12" opacity="0.9"/>
            <text x="510" y="225" text-anchor="middle" fill="white" font-weight="bold" font-size="12">Burkina Faso</text>
            <text x="510" y="245" text-anchor="middle" fill="white" font-size="10">(Launch)</text>
            
            <rect x="610" y="200" width="140" height="60" rx="10" fill="#f39c12" opacity="0.9"/>
            <text x="680" y="225" text-anchor="middle" fill="white" font-weight="bold" font-size="12">Botswana</text>
            <text x="680" y="245" text-anchor="middle" fill="white" font-size="10">(Engage)</text>
            
            <rect x="780" y="200" width="140" height="60" rx="10" fill="#f39c12" opacity="0.8"/>
            <text x="850" y="225" text-anchor="middle" fill="white" font-weight="bold" font-size="12">Countries 6-10</text>
            <text x="850" y="245" text-anchor="middle" fill="white" font-size="10">(Pipeline)</text>
        </g>
        
        <!-- Layer 3: Rwanda Teams (Center of Excellence) -->
        <g id="rwanda-layer">
            <rect x="100" y="380" width="160" height="70" rx="10" fill="#e74c3c" opacity="0.9"/>
            <text x="180" y="410" text-anchor="middle" fill="white" font-weight="bold" font-size="13">National HIC</text>
            <text x="180" y="430" text-anchor="middle" fill="white" font-size="10">Rwanda</text>
            
            <rect x="290" y="380" width="160" height="70" rx="10" fill="#e74c3c" opacity="0.9"/>
            <text x="370" y="410" text-anchor="middle" fill="white" font-weight="bold" font-size="13">Sub-National HIC</text>
            <text x="370" y="430" text-anchor="middle" fill="white" font-size="10">Rwanda Districts</text>
            
            <rect x="480" y="380" width="160" height="70" rx="10" fill="#e74c3c" opacity="0.9"/>
            <text x="560" y="410" text-anchor="middle" fill="white" font-weight="bold" font-size="13">RMS Delivery</text>
            <text x="560" y="430" text-anchor="middle" fill="white" font-size="10">Supply Chain</text>
            
            <rect x="670" y="380" width="160" height="70" rx="10" fill="#e74c3c" opacity="0.9"/>
            <text x="750" y="410" text-anchor="middle" fill="white" font-weight="bold" font-size="13">Umuko</text>
            <text x="750" y="430" text-anchor="middle" fill="white" font-size="10">Training Academy</text>
        </g>
        
        <!-- Layer 4: Central Platform Teams (Foundation) -->
        <g id="central-layer">
            <rect x="250" y="580" width="180" height="80" rx="10" fill="#3498db" opacity="0.9"/>
            <text x="340" y="615" text-anchor="middle" fill="white" font-weight="bold" font-size="14">Healthcare Platform</text>
            <text x="340" y="635" text-anchor="middle" fill="white" font-size="11">(Infrastructure & APIs)</text>
            
            <rect x="500" y="580" width="180" height="80" rx="10" fill="#3498db" opacity="0.9"/>
            <text x="590" y="615" text-anchor="middle" fill="white" font-weight="bold" font-size="14">Sand Intelligence</text>
            <text x="590" y="635" text-anchor="middle" fill="white" font-size="11">(HIC Core Platform)</text>
            
            <rect x="750" y="580" width="180" height="80" rx="10" fill="#3498db" opacity="0.9"/>
            <text x="840" y="615" text-anchor="middle" fill="white" font-weight="bold" font-size="14">Country Expansion</text>
            <text x="840" y="635" text-anchor="middle" fill="white" font-size="11">(Playbooks & Standards)</text>
        </g>
        
        <!-- User Needs Flow (Green Arrows - Top Down) -->
        <!-- Users to Expansion Teams -->
        <path d="M 290 110 L 170 200" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowhead-green)"/>
        <path d="M 290 110 L 340 200" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowhead-green)"/>
        <path d="M 510 110 L 340 200" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowhead-green)"/>
        <path d="M 510 110 L 510 200" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowhead-green)"/>
        <path d="M 730 110 L 680 200" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowhead-green)"/>
        
        <!-- Users to Rwanda Teams -->
        <path d="M 290 110 L 180 380" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowhead-green)"/>
        <path d="M 290 110 L 370 380" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowhead-green)"/>
        <path d="M 510 110 L 560 380" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowhead-green)"/>
        <path d="M 730 110 L 750 380" stroke="#27ae60" stroke-width="2" fill="none" marker-end="url(#arrowhead-green)"/>
        
        <!-- Expansion Teams Dependencies -->
        <path d="M 170 260 L 180 380" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
        <path d="M 340 260 L 370 380" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
        <path d="M 510 260 L 560 380" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
        <path d="M 680 260 L 750 380" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
        
        <!-- Expansion to Country Expansion Team -->
        <path d="M 170 260 L 840 580" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
        <path d="M 340 260 L 840 580" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
        <path d="M 510 260 L 840 580" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
        <path d="M 680 260 L 840 580" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
        
        <!-- Rwanda Teams to Central (Critical Dependencies) -->
        <path d="M 180 450 L 340 580" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrowhead-critical)"/>
        <path d="M 180 450 L 590 580" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrowhead-critical)"/>
        <path d="M 370 450 L 340 580" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrowhead-critical)"/>
        <path d="M 370 450 L 590 580" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrowhead-critical)"/>
        <path d="M 560 450 L 340 580" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrowhead-critical)"/>
        <path d="M 750 450 L 840 580" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
        
        <!-- Mentoring Relationships (Dashed) -->
        <path d="M 180 380 L 170 260" stroke="#f39c12" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
        <path d="M 370 380 L 340 260" stroke="#f39c12" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
        <path d="M 560 380 L 510 260" stroke="#f39c12" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
        <path d="M 750 380 L 680 260" stroke="#f39c12" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
        
        <!-- Legend -->
        <g id="legend" transform="translate(950, 300)">
            <text x="0" y="0" font-weight="bold" font-size="14" fill="#2c3e50">Legend</text>
            
            <line x1="0" y1="20" x2="40" y2="20" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowhead-green)"/>
            <text x="45" y="25" font-size="12" fill="#5a6c7d">User Needs</text>
            
            <line x1="0" y1="45" x2="40" y2="45" stroke="#e74c3c" stroke-width="3" marker-end="url(#arrowhead-critical)"/>
            <text x="45" y="50" font-size="12" fill="#5a6c7d">Critical Dependency</text>
            
            <line x1="0" y1="70" x2="40" y2="70" stroke="#3498db" stroke-width="2" marker-end="url(#arrowhead)"/>
            <text x="45" y="75" font-size="12" fill="#5a6c7d">Dependency</text>
            
            <line x1="0" y1="95" x2="40" y2="95" stroke="#f39c12" stroke-width="2" stroke-dasharray="5,5"/>
            <text x="45" y="100" font-size="12" fill="#5a6c7d">Mentoring</text>
        </g>
        
        <!-- Annotations -->
        <text x="50" y="80" font-size="14" font-weight="bold" fill="#2c3e50">DEMAND</text>
        <text x="50" y="230" font-size="14" font-weight="bold" fill="#2c3e50">DELIVERY</text>
        <text x="50" y="415" font-size="14" font-weight="bold" fill="#2c3e50">EXCELLENCE</text>
        <text x="50" y="620" font-size="14" font-weight="bold" fill="#2c3e50">FOUNDATION</text>
        
        <!-- Flow Indicators -->
        <g transform="translate(1050, 100)">
            <path d="M 0 0 L 0 500" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
            <text x="20" y="250" font-size="12" fill="#2c3e50" transform="rotate(90 20 250)">Dependency Flow</text>
        </g>
    </svg>
    
    <div style="margin-top: 30px;">
        <h3>User-Driven DAG Analysis</h3>
        
        <div class="interaction-grid">
            <div class="interaction-card">
                <h4>🟢 User Needs Drive Everything</h4>
                <p style="color: #5a6c7d; margin-bottom: 10px;">All work flows from user requirements:</p>
                <ul class="interaction-list">
                    <li>• Ministry Officials need policy dashboards</li>
                    <li>• Health Facilities need digital systems</li>
                    <li>• Healthcare Workers need training</li>
                    <li>• Teams exist to serve these needs</li>
                </ul>
            </div>
            
            <div class="interaction-card">
                <h4>🔴 Foundation Supports All</h4>
                <p style="color: #5a6c7d; margin-bottom: 10px;">Central platforms enable everything above:</p>
                <ul class="interaction-list">
                    <li>• Healthcare Platform provides infrastructure</li>
                    <li>• Sand Intelligence powers all HIC instances</li>
                    <li>• Country Expansion enables scaling</li>
                    <li>• Platform failure impacts all users</li>
                </ul>
            </div>
            
            <div class="interaction-card">
                <h4>🔄 Feedback Loops</h4>
                <p style="color: #5a6c7d; margin-bottom: 10px;">Information flows both ways:</p>
                <ul class="interaction-list">
                    <li>• User feedback → Teams → Platform</li>
                    <li>• Platform capabilities → Teams → Users</li>
                    <li>• Rwanda lessons → Expansion teams</li>
                    <li>• All teams inform platform evolution</li>
                </ul>
            </div>
        </div>
        
        <div style="margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
            <h4 style="color: #2c3e50; margin-bottom: 15px;">Value Flow Analysis</h4>
            <table class="metrics-table">
                <thead>
                    <tr>
                        <th>Layer</th>
                        <th>Primary Value</th>
                        <th>Key Dependencies</th>
                        <th>Risk Level</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Demand</strong> (Users)</td>
                        <td>Define requirements & success</td>
                        <td>Need all layers below</td>
                        <td><span style="color: #27ae60;">Low</span></td>
                    </tr>
                    <tr>
                        <td><strong>Delivery</strong> (Expansion)</td>
                        <td>Scale to new markets</td>
                        <td>Rwanda mentoring, Central platform</td>
                        <td><span style="color: #f39c12;">Medium</span></td>
                    </tr>
                    <tr>
                        <td><strong>Excellence</strong> (Rwanda)</td>
                        <td>Prove model, train others</td>
                        <td>Central platform stability</td>
                        <td><span style="color: #f39c12;">Medium</span></td>
                    </tr>
                    <tr>
                        <td><strong>Foundation</strong> (Central)</td>
                        <td>Enable all deployments</td>
                        <td>None (but critical for all)</td>
                        <td><span style="color: #e74c3c;">High</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div style="margin-top: 20px; padding: 20px; background: #e8f4fd; border-radius: 10px;">
            <h4 style="color: #2c3e50; margin-bottom: 10px;">Key Insights</h4>
            <p style="color: #5a6c7d; line-height: 1.8;">
                <strong>1. User-Centric Design:</strong> The DAG shows all teams ultimately serve three user groups - this keeps focus on outcomes not outputs.<br>
                <strong>2. Foundation Risk:</strong> Central platform teams are the critical foundation - they need the most protection and redundancy.<br>
                <strong>3. Scaling Path:</strong> Rwanda → Expansion is the proven scaling model, with mentoring relationships reducing risk.<br>
                <strong>4. No Circular Dependencies:</strong> Clean top-to-bottom flow ensures no deadlocks or waiting cycles.
            </p>
        </div>
    </div>
</div>

<style>
    .interaction-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }
    
    .interaction-card {
        background: white;
        border: 2px solid #e9ecef;
        border-radius: 10px;
        padding: 20px;
        position: relative;
    }
    
    .interaction-card h4 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 1.1em;
    }
    
    .interaction-list {
        list-style: none;
        padding: 0;
    }
    
    .interaction-list li {
        padding: 5px 0;
        color: #5a6c7d;
        font-size: 0.95em;
    }
    
    .metrics-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
    }
    
    .metrics-table th {
        background: #2c3e50;
        color: white;
        padding: 12px;
        text-align: left;
        font-weight: 600;
    }
    
    .metrics-table td {
        padding: 10px 12px;
        border-bottom: 1px solid #e9ecef;
    }
    
    .metrics-table tbody tr:hover {
        background: #f8f9fa;
    }
</style> 